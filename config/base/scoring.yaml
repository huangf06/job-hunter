# =============================================================================
# 评分策略配置 v2.0
# =============================================================================
# 评分系统：基础分 3.0，通过关键词匹配加减分
# 分类上限防止单一类别过度影响总分
# =============================================================================

# =============================================================================
# 基础评分配置
# =============================================================================

base_score:
  # 基础分 (降低到3.0，需要通过匹配关键词来提高)
  starting_score: 3.0

  # 分数范围
  min_score: 0.0
  max_score: 10.0

# =============================================================================
# 评分阈值配置
# =============================================================================

thresholds:
  # APPLY_NOW: 自动生成简历
  apply_now: 7.0

  # APPLY: 生成简历，需要review
  apply: 5.5

  # MAYBE: 值得看看
  maybe: 4.0

  # < 4.0: SKIP

# =============================================================================
# 标题关键词权重 (匹配标题时权重更高)
# =============================================================================

title_scoring:
  # 核心ML/AI角色
  core_ml_ai:
    keywords:
      - "machine learning"
      - "ml engineer"
      - "ai engineer"
      - "artificial intelligence"
      - "deep learning"
      - "data scientist"
    weight: 2.5

  # 数据工程
  data_engineering:
    keywords:
      - "data engineer"
      - "data platform"
      - "analytics engineer"
    weight: 2.0

  # 量化
  quant:
    keywords:
      - "quantitative"
      - "quant"
    weight: 2.5

  # 负面标题关键词
  negative_title:
    senior:
      keywords: ["senior"]
      weight: -0.5
    lead_staff:
      keywords: ["lead", "staff"]
      weight: -1.5

# =============================================================================
# 正文关键词权重 (按分类，有上限)
# =============================================================================

body_scoring:
  # Python
  python:
    keywords: ["python"]
    weight: 1.0
    max_total: 1.0

  # ML框架
  ml_frameworks:
    keywords:
      - "pytorch"
      - "tensorflow"
      - "scikit-learn"
      - "xgboost"
      - "lightgbm"
    weight: 1.0
    max_total: 2.0

  # 数据工具
  data_tools:
    keywords:
      - "spark"
      - "pyspark"
      - "databricks"
      - "airflow"
      - "kafka"
      - "delta lake"
    weight: 1.0
    max_total: 2.0

  # Cloud/MLOps
  cloud_mlops:
    keywords:
      - "aws"
      - "gcp"
      - "docker"
      - "kubernetes"
      - "mlops"
    weight: 0.5
    max_total: 1.5

  # NLP/LLM
  nlp_llm:
    keywords:
      - "nlp"
      - "llm"
      - "transformers"
      - "gpt"
      - "generative ai"
    weight: 1.0
    max_total: 1.0

  # SQL
  sql:
    keywords: ["sql"]
    weight: 0.5
    max_total: 0.5

  # 初级友好
  junior_friendly:
    keywords:
      - "junior"
      - "entry level"
      - "0-3 years"
      - "graduate"
    weight: 1.5
    max_total: 1.5

  # Visa赞助
  visa_sponsorship:
    keywords:
      - "visa sponsor"
      - "relocation"
      - "kmv"
      - "highly skilled migrant"
    weight: 2.0
    max_total: 2.0

  # 负面: 高经验要求
  high_experience:
    "5+ years":
      weight: -0.5
    "6+ years":
      weight: -1.0
    "7+ years":
      weight: -1.0

  # PhD要求
  phd_required:
    keywords:
      - "phd required"
      - "phd preferred"
    weight: -1.0
    max_total: -1.0

# =============================================================================
# 非核心技术惩罚
# =============================================================================

non_core_tech_penalty:
  # 当正文有 >= threshold 个非核心技术关键词且 < min_core 个核心关键词时扣分
  threshold: 3
  min_core_keywords: 2
  penalty: -2.0
  non_core_keywords:
    - "react"
    - "angular"
    - "vue"
    - "typescript"
    - "node.js"
    - "spring boot"
    - ".net"
    - "c#"
    - "ruby"
    - "swift"
    - "kotlin"
  core_keywords:
    - "python"
    - "machine learning"
    - "data"
    - "ml"
    - "ai"
    - "pytorch"
    - "tensorflow"
    - "sql"
    - "spark"
    - "quant"

# =============================================================================
# 目标公司配置 (分层加分)
# =============================================================================

target_companies:
  # Tier 1: 最优先
  tier_1:
    - "picnic"
    - "adyen"
    - "booking.com"
    - "optiver"
    - "imc"
    - "flow traders"
    - "deepdesk"

  # Tier 2: 优先
  tier_2:
    - "ing"
    - "abn amro"
    - "rabobank"
    - "asml"
    - "philips"

  # Tier 3: 关注
  tier_3:
    - "tomtom"
    - "coolblue"
    - "bol.com"
    - "shell"
    - "kpn"

  # 目标公司加分
  bonus_scores:
    tier_1: 2.0
    tier_2: 1.5
    tier_3: 1.0

# =============================================================================
# AI评分配置
# =============================================================================

ai_scoring:
  enabled: true

  # AI评分模型
  model: "kimi-coding/k2p5"  # 或 "anthropic/claude-opus-4-5"

  # 评分维度
  dimensions:
    - name: "skill_match"
      weight: 0.4
      description: "技能匹配度"

    - name: "experience_fit"
      weight: 0.3
      description: "经验匹配度"

    - name: "company_interest"
      weight: 0.2
      description: "公司兴趣度"

    - name: "growth_potential"
      weight: 0.1
      description: "成长潜力"

  # 评分提示词模板
  prompt_template: |
    请评估以下职位与候选人的匹配度。

    候选人背景:
    - 学历: VU Amsterdam M.Sc. in AI
    - 经验: 数据科学、量化研究、ML工程
    - 技能: Python, PyTorch, SQL, 量化交易

    职位信息:
    标题: {title}
    公司: {company}
    描述: {description}

    请从以下维度评分(0-10分):
    1. 技能匹配度: 候选人的技能与职位要求的匹配程度
    2. 经验匹配度: 候选人的经验水平与职位的匹配程度
    3. 公司兴趣度: 该职位对候选人的吸引力
    4. 成长潜力: 该职位对候选人职业发展的帮助

    输出格式:
    总评分: X.X/10
    维度评分:
    - 技能匹配度: X.X
    - 经验匹配度: X.X
    - 公司兴趣度: X.X
    - 成长潜力: X.X
    分析: 简要分析匹配度和建议

# =============================================================================
# 混合评分策略
# =============================================================================

hybrid_scoring:
  enabled: true

  # 规则评分和AI评分的混合比例
  weights:
    rule_based: 0.3
    ai_based: 0.7

  # 评分差异阈值 (用于检测异常)
  divergence_threshold: 3.0

# =============================================================================
# 旧版兼容配置 (保留给 JobAnalyzer)
# =============================================================================

rule_based_scoring:
  enabled: true
  keyword_weights:
    "machine learning": 2.0
    "ml engineer": 2.0
    "data scientist": 2.0
    "ai engineer": 2.0
    "deep learning": 1.5
    "quantitative": 1.5
    "quant": 1.5
    "python": 1.0
    "pytorch": 1.0
    "tensorflow": 1.0
    "sql": 0.8
    "pandas": 0.5
    "numpy": 0.5
    "nlp": 1.0
    "llm": 1.0
    "pyspark": 1.0
    "aws": 0.5
    "gcp": 0.5
    "junior": 1.0
    "entry level": 1.5
    "graduate": 1.0
    "0-3 years": 1.5
    "1-3 years": 1.0
    "associate": 0.5
    "visa sponsor": 2.0
    "relocation": 1.0
    "sponsorship": 2.0
    "kmv": 1.5
    "highly skilled migrant": 1.5
    "5+ years": -0.5
    "6+ years": -1.0
    "7+ years": -1.5
    "senior": -1.0
    "lead": -1.5
    "staff": -2.0
    "principal": -3.0

# =============================================================================
# 配置元数据
# =============================================================================

metadata:
  version: "2.0.0"
  last_updated: "2026-02-05"
  author: "Fei Huang"
  description: "Job scoring configuration - improved with title-based scoring, category caps, and non-core tech penalty"
